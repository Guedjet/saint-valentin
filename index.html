<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pour toi ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

<style>
  
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#ff758c,#ff7eb3);
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  text-align:center;
}

/* COEURS */
.heart{
  position:absolute;
  animation:floatUp 6s linear infinite;
}
@keyframes floatUp{
  from{transform:translateY(100vh);opacity:1;}
  to{transform:translateY(-10vh);opacity:0;}
}

/* ================= INTRO ================= */

.intro{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#ff758c,#ff7eb3);
  z-index:10;
  animation:fadeOutIntro 2s ease 4s forwards;
}

.bouquet{
  font-size:120px;
  animation:pop3D 2s ease forwards;
}

.introText{
  font-family:'Great Vibes',cursive;
  font-size:50px;
  margin-top:20px;
  opacity:0;
  animation:fadeInText 2s ease 1s forwards;
}

@keyframes pop3D{
  0%{transform:scale(0) rotateX(90deg);}
  50%{transform:scale(1.3) rotateX(0);}
  100%{transform:scale(1);}
}

@keyframes fadeInText{
  from{opacity:0;}
  to{opacity:1;}
}

@keyframes fadeOutIntro{
  to{opacity:0;pointer-events:none;}
}

/* ================= ENVELOPPE ================= */

.envelope{
  width:420px;
  height:300px;
  background:white;
  border-radius:15px;
  position:relative;
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  transition:1s;
  overflow:hidden;
}

.flap{
  position:absolute;
  width:100%;
  height:100%;
  background:#ff4d6d;
  clip-path:polygon(0 0,100% 0,50% 50%);
  transition:1s;
}

.open .flap{
  transform:rotateX(180deg);
  transform-origin:top;
}

.message{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:85%;
  max-height:75%;
  padding:20px;
  color:#ff4d6d;
  font-family:'Great Vibes',cursive;
  font-size:clamp(26px, 2.3vw, 38px);
  text-align:left;
  line-height:1.6;
  white-space:pre-line;
  overflow:auto;
}

.open .message{
  opacity:1;
}


/* LETTRE */
.letter{
  position:absolute;
  width:650px;
  height:500px;
  background:#fffdf8;
  border-radius:10px;
  box-shadow:0 15px 40px rgba(0,0,0,0.3);
  padding:50px;
  box-sizing:border-box;
  opacity:0;
  transform:translateY(50px) scale(0.9);
  transition:1s;
  z-index:2;
}

.letter.show{
  opacity:1;
  transform:translateY(-40px) scale(1);
}

.letterText{
  font-family:'Great Vibes',cursive;
  font-size:30px;
  color:#b3003c;
  line-height:1.7;
  white-space:pre-line;
}


/* ================= FILM STRIPS ================= */

.gallery{
  position:fixed;
  inset:0;
  opacity:0;
  pointer-events:none;
}

.filmContainer{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:space-between;
  overflow:hidden;
}

.stripWrapper{
  width:120px;
  overflow:hidden;
}

.filmStrip{
  position:relative;
  width:100%;
  background:black;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
  padding:40px 0;
  animation:scrollDown 12s linear infinite;
}

.scrollUp{ animation:scrollUp 12s linear infinite; }

.filmStrip img{
  width:90px;
  border-radius:6px;
  border:4px solid #222;
}

/* Trous pellicule */
.filmStrip::before,
.filmStrip::after{
  content:"";
  position:absolute;
  top:0;
  height:100%;
  width:20px;
  z-index:1;
  background:repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 30px,
    #111 30px,
    #111 50px
  );
}

.filmStrip::before{ left:0; }
.filmStrip::after{ right:0; }

/* Animations verticales */

@keyframes scrollDown{
  from{transform:translateY(-50%);}
  to{transform:translateY(0%);}
}

@keyframes scrollUp{
  from{transform:translateY(0%);}
  to{transform:translateY(-50%);}
}

/* Overlay centre */

.centerOverlay{
  position:absolute;
  top:0;
  left:35%;
  width:30%;
  height:100%;
  background:rgba(0,0,0,0.75);
  backdrop-filter:blur(4px);
  z-index:3;
}

/* Texte final */

.finalMessage{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-family:'Great Vibes',cursive;
  font-size:60px;
  color:white;
  z-index:4;
  opacity:0;
  transition:2s;
}

/* Feux d'artifice */

@keyframes explode{
  from{transform:scale(1);opacity:1;}
  to{transform:scale(20);opacity:0;}
}

</style>
</head>

<body>

<div class="intro" id="intro">
  <div class="bouquet">üíê</div>
  <div class="introText">Joyeuse Saint-Valentin ‚ù§Ô∏è</div>
</div>

<div class="envelope" onclick="openEnvelope(event)">
  <div class="flap"></div>
  <div class="message" id="typedText"></div>
</div>

<div class="letter" id="letter">
  <div class="letterText" id="typedText"></div>
</div>

<div id="reminder" style="position:absolute;left:5%;top:50%;transform:translateY(-50%);opacity:0;transition:1s;z-index:6;text-align:center;">
  <img src="https://cdn3d.iconscout.com/3d/premium/thumb/emoji-desole-tenant-un-bouquet-de-fleurs-3d-icon-png-download-12247331.png?f=webp" width="180">
  <div style="font-family:'Poppins';margin-top:15px;color:white;">
    Clique encore sur l'enveloppe ü•∫
  </div>
</div>


<div class="gallery" id="gallery"></div>

<!-- üéµ MUSIQUE -->
<audio id="music" loop>
  <source src="https://dn721809.ca.archive.org/0/items/78_14173-I-want-you-I-need-you-I-love-you/14173-I-want-you-I-need-you-I-love-you.mp3" type="audio/mpeg">
</audio>

<script>

let envelopeOpened=false;
let envelopeClickCount = 0;
let musicStarted=false;
let typingFinished = false;
let reminderTimeout;

const music=document.getElementById("music");

/* GALERIE */
const images=[
  "photo1.jpg",
  "photo2.jpg",
  "photo3.jpg",
  "photo4.jpg",
  "photo5.jpg",
  "photo6.jpg",
  "photo7.jpg"
];

/* üíï COEURS FLOTANTS */
function createHeart(){
  const heart=document.createElement("div");
  heart.className="heart";
  heart.innerHTML="‚ù§Ô∏è";
  heart.style.left=Math.random()*100+"vw";
  heart.style.fontSize=(15+Math.random()*20)+"px";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),6000);
}
setInterval(createHeart,300);

  
window.addEventListener("load",()=>{
  setTimeout(()=>{
    document.getElementById("intro").style.display="none";
    document.querySelector(".envelope").style.opacity=1;
  },6000);
});

/* MUSIQUE */
function startMusic(){
  if(!musicStarted){
    music.play().catch(()=>{});
    musicStarted=true;
  }
}

const text = `Mon amour,

Chaque jour avec toi est un cadeau ‚ù§Ô∏è  
Je ne pourrai jamais t‚Äôen offrir assez pour t‚Äôexprimer tout l‚Äôamour que tu me procures.

Malgr√© la distance qui nous s√©pare, ma passion pour toi ne fait que br√ªler plus fort‚Ä¶  
Ce serait emb√™tant si √ßa me br√ªlait vraiment.

Je dois passer cette deuxi√®me Saint-Valentin loin de toi,  
mais j‚Äôesp√®re que ce petit pr√©sent saura te montrer que, peu importe la distance,  
je pense √† toi, je r√™ve de toi, je me languis de toi.

Je t‚Äôaime.

Sinc√®rement √† toi,  
Ton Th√©ophile.`;


function typeWriter(text,el,i=0){
  if(i<text.length){
    el.innerHTML+=text.charAt(i);
    setTimeout(()=>typeWriter(text,el,i+1),35);
  }else{
    typingFinished = true;

    // Apr√®s 8 secondes si pas de clic ‚Üí afficher rappel
    reminderTimeout = setTimeout(()=>{
      if(envelopeClickCount < 2){
        document.getElementById("reminder").style.opacity = 1;
      }
    },8000);
  }
}


/* OUVERTURE ENVELOPPE */
function openEnvelope(e){
  e.stopPropagation();
  envelopeClickCount++;

  // Premier clic ‚Üí ouvrir enveloppe + texte
  if(envelopeClickCount === 1){
    startMusic();
    const env=document.querySelector(".envelope");
    env.classList.add("open");

    const letter=document.getElementById("letter");
    setTimeout(()=>letter.classList.add("show"),600);
    
    typeWriter(text, document.getElementById("typedText"));
  }

  // Deuxi√®me clic ‚Üí lancer la surprise finale
  else if(envelopeClickCount === 2 && typingFinished){
    clearTimeout(reminderTimeout);
    document.getElementById("reminder").style.opacity = 0;
    showFinal();
  }
}

/* FEU D'ARTIFICE + MESSAGE FINAL */
function showFinal(){

  const gallery=document.getElementById("gallery");
  gallery.style.opacity=1;

  const container=document.createElement("div");
  container.className="filmContainer";

  const totalStrips=8;

  for(let i=0;i<totalStrips;i++){

    const wrapper=document.createElement("div");
    wrapper.className="stripWrapper";

    const strip=document.createElement("div");
    strip.className="filmStrip";

    if(i%2!==0) strip.classList.add("scrollUp");

    for(let r=0;r<8;r++){
      images.forEach(src=>{
        const img=document.createElement("img");
        img.src=src;
        strip.appendChild(img);
      });
    }

    wrapper.appendChild(strip);
    container.appendChild(wrapper);
  }

  gallery.appendChild(container);

  const overlay=document.createElement("div");
  overlay.className="centerOverlay";
  gallery.appendChild(overlay);

  const final=document.createElement("div");
  final.className="finalMessage";
  final.innerHTML="Je t‚Äôaime plus que tout ‚ù§Ô∏è";
  gallery.appendChild(final);

  setTimeout(()=>final.style.opacity=1,1500);

  // Feux d'artifice color√©s
  for(let i=0;i<30;i++){
    setTimeout(createFirework,i*150);
  }
}

function createFirework(){
  const fw=document.createElement("div");
  fw.style.position="absolute";
  fw.style.left=Math.random()*100+"vw";
  fw.style.top=Math.random()*100+"vh";
  fw.style.width="8px";
  fw.style.height="8px";
  fw.style.borderRadius="50%";
  fw.style.background=`hsl(${Math.random()*360},100%,60%)`;
  fw.style.zIndex="5";
  fw.style.animation="explode 1s ease-out forwards";
  document.body.appendChild(fw);
  setTimeout(()=>fw.remove(),1000);
}

</script>
</body>
</html>



